
@app.route('/admin_status_p', methods=["POST", "GET"])
def admin_status_p():
    if request.method == "POST":
        email = request.form.get('username_give')
        user = User.query.filter_by(email=email).first()
        if current_user.admin == 2:
            try:
                if 0 <= user.admin <= 2:
                    if user.admin == 2:
                        flash("Пользователь уже является главный администратором")
                        return render_template("admin_status_p.html")
                    elif user.admin == 1:
                        user.admin = 2
                        db.session.commit()
                        flash("Вы сделали пользователя админом второго уровня")
                        return render_template("admin_status_p.html")
                    elif user.admin == 0:
                        user.admin = 1
                        db.session.commit()
                        flash("Вы сделали пользователя админом первого уровня")
                        return render_template("admin_status_p.html")
                else:
                    flash("Error1")
                    return render_template("admin_status_p.html")
            except:
                flash("Error2")
                return render_template("admin_status_p.html")
        return redirect("/")
    return render_template("admin_status_p.html")


@app.route('/admin_status_m', methods=["POST", "GET"])
def admin_status_m():
    if request.method == "POST":
        email = request.form.get('username_give')
        user = User.query.filter_by(email=email).first()

        if current_user.admin == 2:
            try:
                if 0 <= user.admin <= 2:
                    if user.admin == 2:
                        user.admin = 1
                        db.session.commit()
                        flash("Вы сделали пользователя админом первого уровня")
                        return render_template("admin_status_m.html")
                    elif user.admin == 1:
                        user.admin = 0
                        db.session.commit()
                        flash("Вы забрали статус админа у данного пользователя")
                        return render_template("admin_status_m.html")
                    elif user.admin == 0:
                        flash("пользователь уже не имеет статус администратора")
                        return render_template("admin_status_m.html")
                else:
                    flash("Error1")
                    return render_template("admin_status_m.html")
            except:
                flash("Error2")
                return render_template("admin_status_m.html")
        return redirect("/")
    return render_template("admin_status_m.html")
